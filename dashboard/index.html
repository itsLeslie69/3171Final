<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../src/output.css">
    <title>Star Air Analytics</title>
</head>
<body>
    Â <div class="contentContainer grid min-[640]:grid-cols-1 lg:grid-cols-12 w-full gap-4 pr-5 pl-5">
                <!--1st Row-->
                <div class="lg:col-span-3 lg:row-span-1 sm:col-span-1 flex flex-col justify-center items-center gap-2 bg-[#D3D3D3] bg-opacity-70 rounded-lg p-5">
                    <div id="q7Container" class="#BBA79C bg-opacity-50 min-h-[8rem] w-[20rem] rounded-lg p-5 shadow-2xl flex flex-col justify-center items-center">
                        <p>Loyal Customers</p>
                        <h3 id="q7Figure"></h3>
                    </div>
                    <div id="q8Container" class="#BBA79C bg-opacity-50 min-h-[8rem] w-[20rem] rounded-lg p-5 shadow-2xl flex flex-col justify-center items-center">
                        <p>Total Flown</p>
                        <h3 id="q8Figure"></h3>
                    </div>
                    <div id="q9Container" class="#BBA79C bg-opacity-50 min-h-[8rem] w-[19rem] rounded-lg p-5 shadow-2xl flex flex-col justify-center items-center">
                        <p>Cust. With No Delays</p>
                        <h3 id="q9Figure"></h3>
                    </div>
                </div>

               
                <div id="q5Container" class="lg:col-span-3 lg:max-h-[28rem] sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>

                <div id="q1Container" class="lg:col-span-4 sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 m-2"></div>
               
                <div id="q2Container" class="lg:col-span-4 sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 m-2"></div>

                <!--2nd Row-->
                
                <div id="q4Container" class="lg:col-span-3 lg:max-h-[28rem] sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>

                <!--3rd Row-->
                <div id="q2Container" class="lg:col-span-3 lg:max-h-[28rem] sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>

                <div id="q6Container" class="lg:col-span-3 lg:max-h-[25rem] sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>

                <div id="q3Container" class="lg:col-span-3 lg:max-h-[25rem] sm:col-span-1  rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>
                <div class="q3SelectContainer rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 lg:max-h-[8rem] lg:col-span-2  p-5">
                    <p class="mb-2">Select Satisfaction:</p>
                    <select name="graphs" id="dropDown">
                        <option value="select">Select Graph</option>
                        <option value="checkIn">Check-in</option>
                        <option value="booking">Ease of Booking</option>
                        <option value="gateLocation">Gate Location</option>
                        <option value="onBoardService">On-Board Service</option>
                        <option value="baggageHandling">Baggage Handling</option>
                    </select>
                </div>
                <div id="q1Container" class="lg:col-span-3 lg:max-h-[25rem]  sm:col-span-1 rounded-lg shadow-md bg-[#D3D3D3] bg-opacity-70 p-5"></div>
    </div>

</body>
</html>
<script type="module">

  //fetching customer_satisfaction.csv
      //making sure our directory path is correct
      const csvPath = "../data/customer_satisfaction.csv";
      fetch(csvPath)
        .then((response) => {
          if (!response.ok)
            throw new Error(`Failed to fetch FOR index.html: ${response.statusText}`);
          return response.text();
        })
        .then((data) => console.log("index.html csv data successfully recieved: " + data))
        .catch((error) => console.error(error));


   // Imports
    // Helper Functions
    import appendSingleFigure from "./utilities/appendSingleFigure.js"
    // Single Figures
    import returnLoyalCustomers from "./graphs/singleFigures/q7.js"
    import returnTotalFlightDist from "./graphs/singleFigures/q8.js"
    import returnNoDelayCust from "./graphs/singleFigures/q9.js"
    
    // Graphs are JS files that simply append the appropriate graph
    // to a selected div with an ID for that graph
    import getGraph1 from "./graphs/graphFunctions/q1.js"
    import getGraph2 from "./graphs/graphFunctions/q2.js"
    import getGraph3 from "./graphs/graphFunctions/q3.js"
    import getGraph4 from "./graphs/graphFunctions/q4.js"
    import getGraph5 from "./graphs/graphFunctions/q5.js"
    import getGraph6 from "./graphs/graphFunctions/q6.js"
    
    // Promises to handle single figures
    returnLoyalCustomers().then((res) => {
        document.getElementById('q7Figure').innerHTML = res
    })

    returnTotalFlightDist().then((res) => {
        // Function to format distance with ECMAScript 6 object-date functionality
        let nFormat = new Intl.NumberFormat(undefined, {minimumFractionDigits: 0})
        document.getElementById('q8Figure').innerHTML = nFormat.format(res) + "km"
    })

    returnNoDelayCust().then((res) => {
        document.getElementById('q9Figure').innerHTML = res
    })

    getGraph1()
    getGraph2()
    getGraph3()
    getGraph4()
    getGraph5()
    getGraph6()
</script>